<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Christian Cruz portfolio | Javascript 30: JS Drum Kit</title>

    <link href="https://fonts.googleapis.com/css?family=Dosis:200,300,400|Ubuntu:700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
  <link type="text/css" rel="stylesheet" href="../css/custom.css"  media="screen,projection"/>

  <!-- Compiled and minified JavaScript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
    <script src="https://use.fontawesome.com/30414e489a.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>
    <script src="../js/custom.js"></script>
  </head>

  <body>
    <div class="fixed-action-btn horizontal">
      <a class="waves-effect waves-circle waves-light btn-floating btn-large black">
        <i class="material-icons">menu</i>
      </a>
      <ul>
        <li>
          <a class="btn-floating white" href="../index.html">
            <i class="material-icons">home</i>
          </a>
        </li>
        <li>
          <a class="btn-floating white" href="../rocket.html">
            <i class="fa fa-rocket" aria-hidden="true"></i>
          </a>
        </li>
        <li>
          <a class="btn-floating white" target="_blank" href="http://instagram.com/simpleshape">
            <i class="fa fa-instagram" aria-hidden="true"></i>
          </a>
        </li>
        <li>
          <a class="btn-floating white" target="_blank" href="https://github.com/ChristianCruz">
                <i class="fa fa-github-alt" aria-hidden="true"></i>
          </a>
        </li>
        <li>
          <a class="btn-floating white" target="_top" href="mailto:christian@simpleshape.me?Subject=Hello%20there!">
                <i class="material-icons">email</i>
          </a>
        </li>
      </ul>
    </div>

    <div class="drum-kit">
      <div class="container">
        <div class="row">
          <!-- Dropdown Trigger -->
            <a class='dropdown-button btn btn-flat' href='#' data-activates='dropdown'>Javascript 30 <i class="fa fa-caret-down right" aria-hidden="true"></i></a>

            <!-- Dropdown Structure -->
            <ul id='dropdown' class='dropdown-content'>
              <li><a href="javascript_30/01.html">01 - Javascript Drum kit </a></li>
              <li class="divider"></li>
              <li><a href="#!">02 - JS + CSS Clock</a></li>
              <li class="divider"></li>
              <li><a href="#!">03 - Array Cardio Day 1</a></li>
            </ul>
            <br><br>
            <p class="center-align white-text">
              How to listen for key down events, and play sounds associated with the keys.
            </p>

            <div class="keys">
              <div data-key="80" class="key">
                <kbd>P</kbd>
                <span class="sound">Blaster</span>
              </div>
              <div data-key="79" class="key">
                <kbd>O</kbd>
                <span class="sound">Cannon</span>
              </div>
              <div data-key="73" class="key">
                <kbd>I</kbd>
                <span class="sound">Lazer</span>
              </div>
              <div data-key="76" class="key">
                <kbd>L</kbd>
                <span class="sound">Tie F.</span>
              </div>
              <div data-key="75" class="key">
                <kbd>K</kbd>
                <span class="sound">X wing</span>
              </div>
              <div data-key="77" class="key">
                <kbd>M</kbd>
                <span class="sound">vader</span>
              </div>
            </div>

            <audio data-key="80" src="sounds/blaster.wav"></audio>
            <audio data-key="79" src="sounds/cannon.wav"></audio>
            <audio data-key="73" src="sounds/lazer.wav"></audio>
            <audio data-key="76" src="sounds/tie_fighter.wav"></audio>
            <audio data-key="75" src="sounds/xwing.wav"></audio>
            <audio data-key="77" src="sounds/vader.wav"></audio>

        </div>
      </div>
    </div>

    <script>

    function playSound(e) {
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`); // Play audio that corresponds ot the key.
        const key = document.querySelector(`.key[data-key="${e.keyCode}"]`); // Select the corresponding key elements
        if(!audio) return; // Stop the function from running all together
        audio.currentTime = 0; // rewind to the start
        audio.play();
        key.classList.add('playing'); // Add
    }

    function removeTransition(e) {
      if (e.propertyName !== 'transform') return; // Skip it if it's not a transform
      this.classList.remove('playing');
    }

    const keys = document.querySelectorAll('.key');
    keys.forEach(key => key.addEventListener('transitionend', removeTransition));
    window.addEventListener('keydown', playSound);

    </script>

  </body>
</html>
